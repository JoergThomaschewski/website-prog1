# 4.4.2 GPIO: Ein- und Ausgang mit `Pin`



| Ein- und Ausgabebefehle     | Beschreibung                                                   |
|------------|----------------------------------------------------------------|
| [`Pin()`](https://docs.micropython.org/en/latest/library/machine.Pin.html)    | Steuert Hardware wie LEDs und ermÃ¶glicht so die Ausgabe von Signalen. Aber auch die Eingabe Ã¼ber Sensoren wird damit ermÃ¶glicht.|

GPIO steht fÃ¼r General Purpose Input Output. Damit kann man Ã¼ber die Pins an der Seite z.â€¯B. LEDs ansteuern oder Taster einlesen.

## ğŸ§  Was man mit GPIOs machen kann
Die sogenannten GPIOs (General Purpose Input/Output) sind digitale Ein- und AusgÃ¤nge, Ã¼ber die der Raspberry Pi Pico mit seiner Umwelt interagieren kann. Sie sind das HerzstÃ¼ck zur Ansteuerung von Hardwarekomponenten wie Tastern, LEDs oder Sensoren.

Mit GPIOs lassen sich unter anderem folgende Aufgaben realisieren:

- **LEDs ansteuern**: Eine LED kann ein- oder ausgeschaltet oder z.â€¯B. Ã¼ber PWM gedimmt werden.

- **Taster abfragen**: EingÃ¤nge erkennen, ob ein Taster gedrÃ¼ckt wurde â€“ z.â€¯B. zur Steuerung von Programmen.

- **Sensoren auslesen**: Digitale Sensoren senden Signale, die Ã¼ber GPIOs empfangen und verarbeitet werden kÃ¶nnen.

- **Motoren oder Aktoren schalten**: Ãœber Transistoren oder Treibermodule lassen sich Motoren oder Relais ein- und ausschalten.

- **ZustÃ¤nde signalisieren**: LEDs oder Piezo-Elemente kÃ¶nnen Statusanzeigen realisieren â€“ z.â€¯B. als RÃ¼ckmeldung fÃ¼r Benutzeraktionen.


## âš™ï¸ Wie dies technisch umgesetzt wird

Damit ein Raspberry Pi Pico mit seiner Umwelt interagieren kann, mÃ¼ssen die GPIOs technisch richtig angesteuert werden. Je nach Art der Ein- oder Ausgabe kommen unterschiedliche Methoden zum Einsatz.

- **Digitales High/Low-Signal**: Jeder GPIO-Pin kann als Ausgang ein digitales Signal ausgeben â€“ also entweder `HIGH` (3.3â€¯V) oder `LOW` (0â€¯V). So kann z.â€¯B. eine LED ein- oder ausgeschaltet werden. Als Eingang kann ein Pin prÃ¼fen, ob eine Spannung anliegt â€“ z.â€¯B. bei einem gedrÃ¼ckten Taster.

- **Pulsweitenmodulation (PWM)**: Ãœber PWM kann ein GPIO-Pin schnelle Schaltimpulse ausgeben. Damit lassen sich z.â€¯B. LEDs dimmen oder Servomotoren fein steuern. Der Effekt entsteht durch das VerhÃ¤ltnis von Ein- und Ausschaltzeit (Duty Cycle).

- **I2C-Kommunikation**: FÃ¼r komplexere Sensoren oder Displays, die Daten digital Ã¼bertragen, wird hÃ¤ufig das I2C-Protokoll verwendet. Zwei GPIOs (SDA = Serial Data Line, SCL = Serial Clock Line) Ã¼bernehmen dabei die Daten- und Taktleitung.

- **SPI-Kommunikation**: SPI (Serial Peripheral Interface) ist ein schnelles, serielles Protokoll zur Kommunikation mit PeripheriegerÃ¤ten wie Displays oder Speicherkarten. Es nutzt mehrere Leitungen: MISO, MOSI, SCK und CS.

- **UART-Kommunikation**: Ãœber UART (Universal Asynchronous Receiver Transmitter) kann der Pi Pico Daten seriell Ã¼bertragen, z.â€¯B. zu einem PC oder anderen Mikrocontroller. Diese Schnittstelle eignet sich besonders fÃ¼r einfache Punkt-zu-Punkt-Verbindungen.

- **Pull-Up- und Pull-Down-WiderstÃ¤nde**: EingÃ¤nge kÃ¶nnen durch interne oder externe WiderstÃ¤nde auf definierte Grundpegel gebracht werden, damit sie nicht â€flottierendâ€œ sind. Das ist z.â€¯B. bei Tastern wichtig, um stabile Signale zu erhalten.

- **Interrupts**: GPIOs kÃ¶nnen so konfiguriert werden, dass sie auf Ereignisse wie steigende oder fallende Flanken reagieren. Damit lÃ¤sst sich auf TastendrÃ¼cke oder Sensorsignale sofort reagieren ohne stÃ¤ndiges Abfragen im Code.

Diese technischen Grundlagen bilden die Basis fÃ¼r viele Mikrocontroller-Anwendungen, die im weiteren Verlauf noch genauer betrachtet werden.



## ğŸ”Œ Einfache Ein- und Ausgabe mit dem Pi Pico

Um Daten vom Pi Pico auszugeben, kÃ¶nnen wir eine LED steuern oder Daten auf einem angeschlossenen Display anzeigen. Die Eingabe kann beispielsweise durch das DrÃ¼cken eines Tasters erfolgen.

### Beispiel: LED-Steuerung basierend auf Benutzereingaben

```python linenums="1"
# LED ein- und ausschalten basierend auf Benutzereingaben
# Hierbei muss der Pi Pico mit Thonny verbunden bleiben
# J. Thomaschewski, 04.09.2024
from machine import Pin

# LED-Pin definieren
led = Pin('LED', Pin.OUT)

# Eingabe des Benutzers
eingabe = input("LED ein (1) oder aus (0)? ")

# Steuerung der LED basierend auf der Eingabe
if eingabe == "1":
    led.on()
    print("LED ist an.")
elif eingabe == "0":
    led.off()
    print("LED ist aus.")
else:
    print("UngÃ¼ltige Eingabe.")
```

In diesem Beispiel wird die LED am Pi Pico basierend auf der Benutzereingabe ein- oder ausgeschaltet. Der Benutzer gibt `1` ein, um die LED einzuschalten, oder `0`, um sie auszuschalten.



## ğŸ“¶ PWM

PWM steht fÃ¼r Pulsweitenmodulation (englisch: Pulse Width Modulation). Damit kann man z.â€¯B. eine LED dimmen oder einen Motor langsamer drehen lassen.

```python linenums="1"
from machine import Pin, PWM
from time import sleep

led = PWM(Pin(15))

while True:
	for i in range(0, 65000):
		led.duty_u16(i)
		sleep(0.0001)
```

Hier wird der Wert fÃ¼r das TastverhÃ¤ltnis (englisch: Duty Cycle) langsam erhÃ¶ht â€“ so wird die LED immer heller.

Man kann auch direkt einen festen Wert setzen:

```python
led.duty_u16(30000)
```

Die Werte gehen von 0 (immer aus) bis 65535 (immer an). Alles dazwischen ist ein VerhÃ¤ltnis von an/aus â€“ je nachdem wirkt die LED heller oder dunkler.


## ğŸ–¥ï¸ I2C-Displays und Sensor-Kommunikation

Viele Sensoren und Displays kommunizieren Ã¼ber I2C. Damit man weiÃŸ, welche Adresse das angeschlossene GerÃ¤t hat, kann man einen Scan durchfÃ¼hren:

```python linenums="1"
from machine import Pin, I2C

i2c = I2C(0, scl=Pin(17), sda=Pin(16))
print(i2c.scan())
```

Ein typisches Display ist das SSD1306-OLED. Man kann es z.â€¯B. so ansprechen:

```python linenums="1"
from ssd1306 import SSD1306_I2C

oled = SSD1306_I2C(128, 64, i2c)
oled.text("Hallo", 0, 0)
oled.show()
```

Damit wird der Text â€Halloâ€œ auf dem Display angezeigt.
