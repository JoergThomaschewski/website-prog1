# 4.2 Schleife

In diesem Kapitel lernen Sie die Schleifenstrukturen in Python kennen.

## üìú √úbersicht Schleifenarten

In Python gibt es zwei Haupttypen von Schleifen, um Codebl√∂cke wiederholt auszuf√ºhren: `for`-Schleifen und `while`-Schleifen. 

| Schleifenart  | Beschreibung                                                   |
|---------------|----------------------------------------------------------------|
| [`while`-Schleife](https://docs.python.org/3/reference/compound_stmts.html#the-while-statement) | Wiederholt eine Sequenz von Anweisungen, solange eine Bedingung erf√ºllt ist. Eine `while`-Schleife ist gut, wenn die Anzahl der Schleifendurchl√§ufe nicht klar ist.|
| [`for`-Schleife](https://docs.python.org/3/reference/compound_stmts.html#the-for-statement)  | Wiederholt eine Sequenz von Anweisungen f√ºr jedes Element einer Sammlung (z.B. Liste, Tupel, String). Eine `for`-Schleife ist gut, wenn die Anzahl der Schleifendurchl√§ufe definiert ist. |


Die `while`-Schleife kennen wir schon.

```python linenums="1"
# Interne LED blinken lassen - schlecht 1
# J. Thomaschewski, 12.08.2024
from machine import Pin
from time import sleep
led = Pin('LED', Pin.OUT)
while True:
    led.on()
    sleep(0.5)
    led.off()
    sleep(0.5)
```


## üîÇ Verwendung der `while`-Schleife

Eine `while`-Schleife wird verwendet, wenn Sie eine Schleife ben√∂tigen, die solange l√§uft, bis eine bestimmte Bedingung nicht mehr erf√ºllt ist oder bis eine bestimmte Bedingung endlich erf√ºllt ist.

**Beispiele f√ºr `while`-Schleifen**

1. **Endlosschleife**
   ```python linenums="1"
   while True:
       print("Dies l√§uft unendlich...")
   ```

2. **Einfaches Beispiel**
   ```python linenums="1"
   x = 0
   while x < 5:
       print(x)
       x += 1
   ```
   Diese Problemstellung kann man besser mit einer for-Schleife l√∂sen, da die Anzahl der Durchl√§ufe klar ist.

   Die while-Schleife verwendet man, wenn eine Endlosschleife ben√∂tigt wird oder wenn unklar ist, wie lange es dauert, bis der Zustand `True` erreicht wird (beispielsweise bei der unbeschr√§nkten M√∂glichkeit ein Passwort richtig einzugeben). 

## üîÅ Verwendung der `for`-Schleife

Eine `for`-Schleife wird verwendet, wenn wir eine festgelegte Anzahl von Iterationen durchlaufen m√∂chten oder √ºber eine Sammlung von Elementen iterieren m√ºssen.

Auch bei Schleifen die richtige Einr√ºckung entscheidend. Jeder Codeblock, der zu einer Schleife geh√∂rt, muss entsprechend einger√ºckt werden, um die Struktur des Programms korrekt darzustellen.

**Beispiele f√ºr `for`-Schleifen**

1. **Einfaches Beispiel**

    Das `i` ist hier eine Laufvariable, die nach nach dem Beenden der for-Schleife den letzten wert beibeh√§lt (also `i=4`)
    ```python linenums="1"
    for i in range(5):
        print(f"Durchlauf: {i}")
    ``` 
    *Ergebnis:*<br>
    Durchlauf: 0<br>
    Durchlauf: 1<br>
    Durchlauf: 2<br>
    Durchlauf: 3<br>
    Durchlauf: 4<br><br>



2. **Iteration √ºber eine Liste**

    Hier ist nun `farbe` die Laufvariable
    ```python linenums="1"
    farben = ["rot", "gr√ºn", "blau"]
    for farbe in farben:
       print(farbe)
    ```
    *Ergebnis:*<br>
    rot<br>
    gr√ºne<br>
    blau<br><br>

3. **Iteration √ºber ein Dictionary - Keys verwenden**
   ```python linenums="1"
   # Ein dictionary besteht aus Bezeichner-Werte-Paaren (engl.: key-value)
   person = {"name": "Alice", "ort": "Wunderland"}
   for key in person:
       print(key)
   ```
    *Ergebnis:*<br>
    name<br>
    ort<br><br>

4. **Iteration √ºber ein Dictionary - Values verwenden**
   ```python linenums="1"
   # Ein dictionary besteht aus Bezeichner-Werte-Paaren (engl.: key-value)
   person = {"name": "Alice", "ort": "Wunderland"}
   for value in person.values():
       print(value)
   ```
    *Ergebnis:*<br>
    Alice<br>
    Wunderland<br><br>

5. **Iteration √ºber ein Dictionary - Keys und Values verwenden**
   ```python linenums="1"
   # Ein dictionary besteht aus Bezeichner-Werte-Paaren (engl.: key-value)
   person = {"name": "Alice", "ort": "Wunderland"}
   for key,value in person.items():
       print(key, value)
   ```
    *Ergebnis:*<br>
    name Alice<br>
    ort Wunderland<br><br>

6. **Verschachtelte Schleifen**
   ```python linenums="1"
   for i in range(3):
       for j in range(2):
           print(i, j)
   ```

    *Die Ausgabe lautet:<br>*
    0 0<br>
    0 1<br>
    1 0<br>
    1 1<br>
    2 0<br>
    2 1<br>

!!! question "Aufgabe verschachtelte Schleife"

    Wie lautet die Ausgabe nun?

    ```python linenums="1"
    for i in range(2):
        for j in range(3):
            print(i, j)
    ```


## Verwendung von üõë `break` und  ‚è≠Ô∏è`continue`

In Python k√∂nnen Sie die Anweisungen `break` und `continue` verwenden, um den Fluss einer Schleife zu steuern:

- **`break`**: Bricht die Schleife vollst√§ndig ab und f√§hrt mit dem n√§chsten Codeblock nach der Schleife fort.
- **`continue`**: √úberspringt den aktuellen Schleifendurchlauf und beginnt mit dem n√§chsten Durchlauf.

**Beispiel f√ºr `break` und `continue`**

```python linenums="1"
for i in range(10):
    if i == 3:
        continue  # √úberspringt den Rest dieses Schleifendurchlaufs
    if i == 7:
        break  # Bricht die Schleife ab
    print(i)
```

!!! note "Klausurrelevant"
    In der Pr√ºfung m√ºssen Sie in der Lage sein, sowohl `for`-Schleifen als auch `while`-Schleifen anzuwenden und auch zu verstehen, wie Sie `break` und `continue` sinnvoll einsetzen.

## üîå Pi Pico Script

Wir nehmen das Pi Pico-Board und lassen die interne LED blinken, wobei die Blinkdauer mithilfe einer Schleife  und Listen variiert wird.

```python linenums="1"
# LED-Morsen: SOS und Name "Emden"
# J. Thomaschewski, 04.09.2024
from machine import Pin
from time import sleep

led = Pin('LED', Pin.OUT)

# Morsen f√ºr SOS (kurz-kurz-kurz, lang-lang-lang, kurz-kurz-kurz)
sos = [0.2, 0.2, 0.2, 0.6, 0.6, 0.6, 0.2, 0.2, 0.2]

# Morsen f√ºr "Emden" (lang-lang, kurz-lang-lang-lang, lang-lang-lang, kurz-lang-lang, kurz-lang-lang-lang)
emden = [0.6, 0.6, 0.2, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.2, 0.6, 0.6, 0.6, 0.2, 0.6, 0.6, 0.6]

# SOS morsen
for duration in sos:
    led.on()
    sleep(duration)
    led.off()
    sleep(0.2)  # kurze Pause zwischen den Signalen

sleep(3)  # Pause zwischen den W√∂rtern

# Name "Emden" morsen
for duration in emden:
    led.on()
    sleep(duration)
    led.off()
    sleep(0.2)  # kurze Pause zwischen den Signalen
```

In diesem Code wird die Variable `duration` in den `for`-Schleifen verwendet, um die Dauer (in Sekunden) zu speichern, die die LED bei jedem Schritt ein- bzw. ausgeschaltet bleibt. Das Wort `duration` wurde gew√§hlt, damit klar wird, dass es sich um eine Zeitdauer handelt.

Die Schleife `for duration in sos:` bedeutet, dass die Variable `duration` nacheinander die Werte aus der Liste `sos` annimmt, also erst `0.2`, dann `0.2`, dann `0.2` usw. F√ºr jeden dieser Werte wird die LED f√ºr die entsprechende Dauer eingeschaltet, dann eine kurze Pause gemacht, und der Vorgang wird f√ºr das n√§chste Element in der Liste wiederholt.

Es ist wichtig zu verstehen, dass der Name `duration` nur eine Hilfsvariable ist. Man k√∂nnte diese Variable auch `i`, `step` oder einen anderen beliebigen Namen nennen. Der Name sollte jedoch sinnvoll gew√§hlt werden, um den Code lesbarer zu machen. Wenn Sie `duration` verwenden, ist sofort klar, dass es sich um die Dauer der LED-Leuchtdauer handelt. Wenn Sie stattdessen `i` oder `step` verwenden w√ºrden, w√§re die Bedeutung weniger offensichtlich, aber der Code w√ºrde genauso funktionieren.

!!! question "Aufgabe (Klausurniveau)"

    Schreiben Sie ein Script, das SOS morsen l√§sst, indem Sie ein `dictionary` verwenden, um die Morsezeichen f√ºr die Buchstaben `S` und `O` zu speichern. Verwenden Sie das `dictionary`, um die LED entsprechend blinken zu lassen.

    ??? example "L√∂sung"

        ```python linenums="1"
        # SOS Morsen mit Dictionary
        # J. Thomaschewski, 04.09.2024
        from machine import Pin
        from time import sleep

        led = Pin('LED', Pin.OUT)

        # Dictionary mit Morsezeichen f√ºr S und O
        morseCode = {
            'S': [0.2, 0.2, 0.2],  # Kurz-Kurz-Kurz
            'O': [0.6, 0.6, 0.6]   # Lang-Lang-Lang
        }

        # SOS Morsen
        sos = ['S', 'O', 'S']

        for buchstabe in sos:
            for duration in morseCode[buchstabe]:
                led.on()
                sleep(duration)
                led.off()
                sleep(0.2)  # kurze Pause zwischen den Signalen
            sleep(0.6)  # Pause zwischen den Buchstaben
        ```


!!! question "Aufgabe (Klausurniveau)"

    Schreiben Sie ein Script, das die LED 10 Mal mit abnehmender Geschwindigkeit blinken l√§sst.

    ??? example "L√∂sungen"

        ```python linenums="1"
        # LED 10 Mal mit abnehmender Geschwindigkeit blinken lassen
        # J. Thomaschewski, 04.09.2024
        from machine import Pin
        from time import sleep

        led = Pin('LED', Pin.OUT)

        delay = 0.1  # Startverz√∂gerung

        for i in range(10):
            led.on()
            sleep(delay)
            led.off()
            sleep(delay)
            delay += 0.2  # Verz√∂gerung bei jedem Durchlauf erh√∂hen
        ```

!!! question "Aufgabe Bewegen auf dem Display"

    1. Schreiben Sie ein Script, das "Moin" auf dem Display zeigt. 
    2. Nun soll "Moin" auf dem Display von oben nach unten wandern. Verwenden Sie daf√ºr eine for-Schleife
                                                                        

